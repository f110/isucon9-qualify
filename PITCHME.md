### isuconの予選問題をチューニングする

#### マイルール

- カツカツにチューニングしすぎない
  - あくまで本番運用できる状態を維持する
- 誰でも同様にセットアップしてスコアを出せるようにする
- 複数台構成は考慮する

---

### 基本方針

- トランザクションは短くする
- 参照はmemcachedに逃がす
- 悲観的ロックはなるべく避ける
- ミドルウェアのチューニングはほぼしない

---

### 構成

- Go 1.13
- MySQL 5.7

That's all!

---

### MySQLのチューニング

```
[mysqld]
innodb_buffer_pool_size = 1g
max_connections = 10000
```

- 全てのデータをメモリ上に載せて
- 十分なコネクションをできるようにする

---

### memcached

```
$ memcached -m 1024 -c 10240
```

- 確保する最大メモリ量を増やす
- コネクション数の上限も増やす
- バージョンは最新で良いが古くてもそんなに違わないはず
